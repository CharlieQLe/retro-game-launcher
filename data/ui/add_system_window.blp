using Gtk 4.0;
using Adw 1;

template AddSystemWindow : Adw.Window {
    title: "Add System";
    default-height: 300;
    default-width: 400;
    resizable: false;
    modal: true;
    content: Adw.ToastOverlay toast_overlay {
        child: Box {
            orientation: vertical;
            hexpand: true;
            vexpand: true;

            Adw.HeaderBar {
                decoration-layout: "";

                [start]
                Gtk.Button {
                    valign: center;
                    label: "Cancel";
                    clicked => on_cancel_clicked();
                }

                [end]
                Gtk.Button add_system_btn {
                    valign: center;
                    label: "Add";
                    clicked => on_add_system_clicked();
                    styles [ "suggested-action" ]
                }
            }

            Adw.Clamp {
                child: Gtk.Box {
                    orientation: vertical;
                    margin-top: 24;
                    margin-bottom: 24;
                    margin-start: 12;
                    margin-end: 12;
                    spacing: 24;

                    Adw.PreferencesGroup {
                        title: "System information";

                        Adw.EntryRow system_name_entry {
                            title: "System name";
                            changed => on_system_entry_changed();
                        }

                        Adw.EntryRow games_directory_entry {
                            title: "Games directory";
                            changed => on_system_entry_changed();

                            [suffix]
                            Gtk.Button {
                                valign: center;
                                icon-name: "folder-open-symbolic";
                                clicked => on_games_directory_chooser_clicked();

                                styles [ "flat" ]
                            }
                        }
                    }
                };
            }
        };
    };
}